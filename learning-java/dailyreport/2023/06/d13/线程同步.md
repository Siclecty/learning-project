##### 线程同步

* 为了解决线程安全问题。

##### 线程同步的核心思想

* 加锁，把共享资源进行上锁，每次只能一个线程进入访问完毕以后解锁，然后其他线程才能进来。

##### 同步代码块

* 作用：把出现线程安全问题的核心代码给上锁。
* 原理：每次只能一个线程进入，执行完毕后自动解锁，其他线程才可以进来执行。

###### 锁对象要求

* 理论上：锁对象只要对于当前同时执行的线程来说是同一个对象即可。

###### 锁对象的规范要求

* 规范上：建议使用共享资源作为锁对象。
* 对于实例方法建议使用this作为锁对象。
* 对于静态方法建议使用字节码（类名.class）对象作为锁对象。

##### 同步方法

* 作用：把出现线程安全问题的核心方法给上锁。
* 原理：每次只能一个线程进入，执行完毕以后自动解锁，其他线程才可以进来执行。

###### 同步方法底层原理

* 同步方法其实底层也是有隐式锁对象的，只是锁的范围是整个方法代码。
* 如果方法是实例方法：同步方法默认用this作为的锁对象。但是代码要高度面向对象！
* 如果方法是静态方法：同步方法默认用类名.class作为的锁对象。

##### Lock锁

* Lock实现提供比使用synchronized方法和语句可以获得更广泛的锁定操作。
* Lock是接口不能直接实例化，这里采用它的实现类ReentrantLock来构建Lock锁对象。

API：

| void lock()   | 获得锁 |
| ------------- | ------ |
| void unlock() | 释放锁 |

##### 单例模式

* 单例模式，顾名思义，就是一个类只有一个实例，该类负责创建自己的对象，同时确保只有单个对象会被创建，并且该类提供了一种访问其唯一对象的方式，即使用static方法直接访问，不需要且不能在外部实例化该类的对象。

###### 注意事项

1. 在任何情况下，单例类只能有一个实例存在。
2. 单例类需要自己为自己创建实例。
3. 单例类必须有能力为其他类提供实例。

##### “饿汉式”单例模式

* “饿汉式”单例模式是指类一旦加载，就把单例初始化完成，在方法调用前，实例就已经创建好了。
* “饿汉式”单例模式可保证在获取实例时，单例就已经存在了。